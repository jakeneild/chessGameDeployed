!function(){return function e(t,o,l){function i(n,a){if(!o[n]){if(!t[n]){var d="function"==typeof require&&require;if(!a&&d)return d(n,!0);if(r)return r(n,!0);var s=new Error("Cannot find module '"+n+"'");throw s.code="MODULE_NOT_FOUND",s}var c=o[n]={exports:{}};t[n][0].call(c.exports,function(e){return i(t[n][1][e]||e)},c,c.exports,e,t,o,l)}return o[n].exports}for(var r="function"==typeof require&&require,n=0;n<l.length;n++)i(l[n]);return i}}()({1:[function(e,t,o){const l={execute:function(t,o){console.log("begin AI calculation");const i=l.smartScore(t,o);console.log("smartScore complete",i);let r="",n=-999;for(item in"B"===o&&(n=999),i.start)"meta"!==item&&"score"!==item&&"turn"!==item!==item!=="board"&&"pruneDump"!==item&&void 0!==i.start[item].meta&&("W"===o?i.start[item].meta>n&&(n=i.start[item].meta,r=item):i.start[item].meta<n&&(n=i.start[item].meta,r=item));const a=e("./data");console.log("Best move:",r),a.legalMoves.bestMove=[r],a.executeMove.start(r)},makeMove:function(e,t){const o=e.slice(0,2),l=e.slice(2,3),i=e.slice(3,4),r=e.slice(4,5),n=e.slice(5,6),a=function(e){let t=[[]];for(let o=0;o<8;o++){t[o]=[];for(let l=0;l<8;l++)t[o][l]=e[o][l]}return t}(t);return a[r][n]=o,a[l][i]="e",a},getLegalMoves:function(e,t){let o="B";"B"===t&&(o="W");let l=function(e,t){let o=e.slice(0,2),l=e.slice(2,3),i=e.slice(3,4),r=e.slice(4,5),n=e.slice(5,6),a=t;return a[r][n]=o,a[l][i]="e",a},i=[];for(let l=0;l<8;l++)for(let r=0;r<8;r++){let n=e[l][r];if(e[l][r].includes(t)){if(n.includes("k"))for(let t=-1;t<=1;t++)for(let a=-1;a<=1;a++)if(void 0!==e[l+t]&&void 0!==e[l+t][r+a]){if("e"===e[l+t][r+a]){let e=`${n}${l}${r}${l+t}${r+a}`;i.push(e)}if(e[l+t][r+a].includes(o)){let e=`${n}${l}${r}${l+t}${r+a}`;i.push(e)}}if(n.includes("p"))if(n.includes("W")&&"W"===t){if("e"===e[l-1][r]){let t=`${n}${l}${r}${l-1}${r}`;if(i.push(t),void 0!==e[l-2]&&"e"===e[l-2][r]&&6===l){let e=`${n}${l}${r}${l-2}${r}`;i.push(e)}}if(void 0!==e[l-1][r-1]&&e[l-1][r-1].includes("B")){let e=`${n}${l}${r}${l-1}${r-1}`;i.push(e)}if(void 0!==e[l-1][r+1]&&e[l-1][r+1].includes("B")){let e=`${n}${l}${r}${l-1}${r+1}`;i.push(e)}}else if(n.includes("B")&&"B"===t){if("e"===e[l+1][r]){let t=`${n}${l}${r}${l+1}${r}`;if(i.push(t),void 0!==e[l+2]&&"e"===e[l+2][r]&&1===l){let e=`${n}${l}${r}${l+2}${r}`;i.push(e)}}if(void 0!==e[l+1][r-1]&&e[l+1][r-1].includes("W")){let e=`${n}${l}${r}${l+1}${r-1}`;i.push(e)}if(void 0!==e[l+1][r+1]&&e[l+1][r+1].includes("W")){let e=`${n}${l}${r}${l+1}${r+1}`;i.push(e)}}if(n.includes("r")){for(let t=1;t<8;t++)if(void 0!==e[l+t]&&void 0!==e[l+t][r])if("e"===e[l+t][r]){let e=`${n}${l}${r}${l+t}${r}`;i.push(e)}else if(e[l+t][r].includes(o)){let e=`${n}${l}${r}${l+t}${r}`;i.push(e),t=8}else t=8;for(let t=1;t<8;t++)if(void 0!==e[l-t]&&void 0!==e[l-t][r])if("e"===e[l-t][r]){let e=`${n}${l}${r}${l-t}${r}`;i.push(e)}else if(e[l-t][r].includes(o)){let e=`${n}${l}${r}${l-t}${r}`;i.push(e),t=8}else t=8;for(let t=1;t<8;t++)if(void 0!==e[l]&&void 0!==e[l][r-t])if("e"===e[l][r-t]){let e=`${n}${l}${r}${l}${r-t}`;i.push(e)}else if(e[l][r-t].includes(o)){let e=`${n}${l}${r}${l}${r-t}`;i.push(e),t=8}else t=8;for(let t=1;t<8;t++)if(void 0!==e[l]&&void 0!==e[l][r+t])if("e"===e[l][r+t]){let e=`${n}${l}${r}${l}${r+t}`;i.push(e)}else if(e[l][r+t].includes(o)){let e=`${n}${l}${r}${l}${r+t}`;i.push(e),t=8}else t=8}if(n.includes("n")){let t=function(t,a){if(void 0!==e[l+t]&&void 0!==e[l+t][r+a]&&("e"===e[l+t][r+a]||e[l+t][r+a].includes(`${o}`))){let e=`${n}${l}${r}${l+t}${r+a}`;i.push(e)}};t(2,1),t(2,-1),t(-2,1),t(-2,-1),t(1,2),t(1,-2),t(-1,2),t(-1,-2)}if(n.includes("b")){for(let t=1;t<8;t++)if(void 0!==e[l+t]&&void 0!==e[l+t][r+t])if("e"===e[l+t][r+t]){let e=`${n}${l}${r}${l+t}${r+t}`;i.push(e)}else if(e[l+t][r].includes(o)){let e=`${n}${l}${r}${l+t}${r+t}`;i.push(e),t=8}else t=8;for(let t=1;t<8;t++)if(void 0!==e[l-t]&&void 0!==e[l-t][r+t])if("e"===e[l-t][r+t]){let e=`${n}${l}${r}${l-t}${r+t}`;i.push(e)}else if(e[l-t][r+t].includes(o)){let e=`${n}${l}${r}${l-t}${r+t}`;i.push(e),t=8}else t=8;for(let t=1;t<8;t++)if(void 0!==e[l+t]&&void 0!==e[l+t][r-t])if("e"===e[l+t][r-t]){let e=`${n}${l}${r}${l+t}${r-t}`;i.push(e)}else if(e[l+t][r-t].includes(o)){let e=`${n}${l}${r}${l+t}${r-t}`;i.push(e),t=8}else t=8;for(let t=1;t<8;t++)if(void 0!==e[l-t]&&void 0!==e[l-t][r-t])if("e"===e[l-t][r-t]){let e=`${n}${l}${r}${l-t}${r-t}`;i.push(e)}else if(e[l-t][r-t].includes(o)){let e=`${n}${l}${r}${l-t}${r-t}`;i.push(e),t=8}else t=8}if(n.includes("q")){for(let t=1;t<8;t++)if(void 0!==e[l+t]&&void 0!==e[l+t][r])if("e"===e[l+t][r]){let e=`${n}${l}${r}${l+t}${r}`;i.push(e)}else if(e[l+t][r].includes(o)){let e=`${n}${l}${r}${l+t}${r}`;i.push(e),t=8}else t=8;for(let t=1;t<8;t++)if(void 0!==e[l-t]&&void 0!==e[l-t][r])if("e"===e[l-t][r]){let e=`${n}${l}${r}${l-t}${r}`;i.push(e)}else if(e[l-t][r].includes(o)){let e=`${n}${l}${r}${l-t}${r}`;i.push(e),t=8}else t=8;for(let t=1;t<8;t++)if(void 0!==e[l]&&void 0!==e[l][r-t])if("e"===e[l][r-t]){let e=`${n}${l}${r}${l}${r-t}`;i.push(e)}else if(e[l][r-t].includes(o)){let e=`${n}${l}${r}${l}${r-t}`;i.push(e),t=8}else t=8;for(let t=1;t<8;t++)if(void 0!==e[l]&&void 0!==e[l][r+t])if("e"===e[l][r+t]){let e=`${n}${l}${r}${l}${r+t}`;i.push(e)}else if(e[l][r+t].includes(o)){let e=`${n}${l}${r}${l}${r+t}`;i.push(e),t=8}else t=8;for(let t=1;t<8;t++)if(void 0!==e[l+t]&&void 0!==e[l+t][r+t])if("e"===e[l+t][r+t]){let e=`${n}${l}${r}${l+t}${r+t}`;i.push(e)}else if(e[l+t][r+t].includes(o)){let e=`${n}${l}${r}${l+t}${r+t}`;i.push(e),t=8}else t=8;for(let t=1;t<8;t++)if(void 0!==e[l-t]&&void 0!==e[l-t][r+t])if("e"===e[l-t][r+t]){let e=`${n}${l}${r}${l-t}${r+t}`;i.push(e)}else if(e[l-t][r+t].includes(o)){let e=`${n}${l}${r}${l-t}${r+t}`;i.push(e),t=8}else t=8;for(let t=1;t<8;t++)if(void 0!==e[l+t]&&void 0!==e[l+t][r-t])if("e"===e[l+t][r-t]){let e=`${n}${l}${r}${l+t}${r-t}`;i.push(e)}else if(e[l+t][r-t].includes(o)){let e=`${n}${l}${r}${l+t}${r-t}`;i.push(e),t=8}else t=8;for(let t=1;t<8;t++)if(void 0!==e[l-t]&&void 0!==e[l-t][r-t])if("e"===e[l-t][r-t]){let e=`${n}${l}${r}${l-t}${r-t}`;i.push(e)}else if(e[l-t][r-t].includes(o)){let e=`${n}${l}${r}${l-t}${r-t}`;i.push(e),t=8}else t=8}}}for(let s=0;s<i.length;s++){var r=[];for(let t=0;t<8;t++){r[t]=[];for(let o=0;o<8;o++)r[t][o]=e[t][o]}check=!1;let c=l(i[s],e);e=c,t=o,o="W","W"===t&&(o="B");let u="",$="";for(let t=0;t<8;t++)for(let l=0;l<8;l++)e[t][l]===`${o}k`&&(u=t,$=l);function n(o,l){for(let i=1;i<8;i++)void 0!==e[u+o*i]&&void 0!==e[u+o*i][$+l*i]?"e"!==e[u+o*i][$+l*i]&&(e[u+o*i][$+l*i]===`${t}k`&&1===i?(array.push("!"),i=8):(array.push(e[u+o*i][$+l*i]),i=8)):(array.push("e"),i=8);return array}"W"===o?(void 0!==e[u-1]&&void 0!==e[u-1][$+1]&&e[u-1][$+1]===`${t}p`&&(check=!0),void 0!==e[u-1]&&void 0!==e[u-1][$-1]&&e[u-1][$-1]===`${t}p`&&(check=!0)):(void 0!==e[u+1]&&void 0!==e[u+1][$+1]&&e[u+1][$+1]===`${t}p`&&(check=!0),void 0!==e[u+1]&&void 0!==e[u+1][$-1]&&e[u+1][$-1]===`${t}p`&&(check=!0)),array=[];for(let e=-1;e<=1;e++)for(let t=-1;t<=1;t++)n(e,t);(array.includes("!")||array.includes(`${t}q`))&&(check=!0);for(let e=0;e<9;e+=2)array[e]===`${t}b`&&(check=!0);for(let e=1;e<9;e+=2)array[e]===`${t}r`&&(check=!0);var a=function(o){void 0!==e[u+o[0]]&&void 0!==e[u+o[0]][$+o[1]]&&e[u+o[0]][$+o[1]]===`${t}n`&&(check=!0)},d=[[2,1],[2,-1],[-2,1],[-2,-1],[1,2],[1,-2],[-1,2],[-1,-2]];for(let e=0;e<d.length;e++)a(d[e]);e=r,!0===check&&(i.splice(s,1),s--)}return i},isInCheck:function(e,t){let o="W";"W"===t&&(o="B"),check=!1;let l="",i="";for(let o=0;o<8;o++)for(let r=0;r<8;r++)e[o][r]===`${t}k`&&(l=o,i=r);function r(t,r){for(let n=1;n<8;n++)void 0!==e[l+t*n]&&void 0!==e[l+t*n][i+r*n]?"e"!==e[l+t*n][i+r*n]&&(e[l+t*n][i+r*n]===`${o}k`&&1===n?(array.push("!"),n=8):(array.push(e[l+t*n][i+r*n]),n=8)):(array.push("e"),n=8);return array}"W"===t?(void 0!==e[l-1]&&void 0!==e[l-1][i+1]&&e[l-1][i+1]===`${o}p`&&(check=!0),void 0!==e[l-1]&&void 0!==e[l-1][i-1]&&e[l-1][i-1]===`${o}p`&&(check=!0)):(void 0!==e[l+1]&&void 0!==e[l+1][i+1]&&e[l+1][i+1]===`${o}p`&&(check=!0),void 0!==e[l+1]&&void 0!==e[l+1][i-1]&&e[l+1][i-1]===`${o}p`&&(check=!0)),array=[];for(let e=-1;e<=1;e++)for(let t=-1;t<=1;t++)r(e,t);(array.includes("!")||array.includes(`${o}q`))&&(check=!0);for(let e=0;e<9;e+=2)array[e]===`${o}b`&&(check=!0);for(let e=1;e<9;e+=2)array[e]===`${o}r`&&(check=!0);var n=function(t){for(item in t)void 0!==e[l+t[0]]&&void 0!==e[l+t[0]][i+t[1]]&&e[l+t[0]][i+t[1]]===`${o}n`&&(check=!0)},a=[[2,1],[2,-1],[-2,1],[-2,-1],[1,2],[1,-2],[-1,2],[-1,-2]];for(let e=0;e<a.length;e++)n(a[e]);return check},pruneMeta:function(e){console.log("obj before prune: ",e);let t=function(t,o){let i=[],r=999,n="filler",a=0,d=0;"B"===o&&(r=-999);for(let e=0;e<t.length;e++)i.push(t[e].score),"W"===o?t[e].meta<r&&(r=t[e].meta,n=t[e].move,d=t[e].score,a=e):t[e].meta>r&&(r=t[e].meta,n=t[e].move,d=t[e].score,a=e);let s=0;for(let e=0;e<i.length;e++)s+=i[e];s/=i.length,l.splice(a,1),console.log(d,s),d<=s&&"W"===o?(void 0===e.pruneDump?e.pruneDump=[{move:n,obj:e[n]}]:e.pruneDump.push({move:n,obj:e[n]}),delete e[n]):d>=s&&"B"===o&&(void 0===e.pruneDump?e.pruneDump=[{move:n,obj:e[n]}]:e.pruneDump.push({move:n,obj:e[n]}),delete e[n])},o=e.turn,l=[];for(item in e)"turn"!==item&&"score"!==item&&"board"!==item&&"meta"!==item&&"pruneDump"!==item&&l.push({move:item,meta:e[item].meta,score:e[item].score});let i=l.length;i=Math.round(i/2);for(let e=0;e<i-1;e++){let e=!0,i=l[0].meta;for(let t=0;t<l.length;t++)l[t].meta!==i&&(e=!1);!1===e&&t(l,o)}return console.log("obj after prune",e),e},smartScore:function(e,t){let o=function(e){let t=[[]];for(let o=0;o<8;o++){t[o]=[];for(let l=0;l<8;l++)t[o][l]=e[o][l]}return t},i=function(e){return"W"===e?"B":"W"},r={start:{}};r.start.board=o(e);let n=function(e){return++e},a=function(e,t,r,d,s){for(let t=0;t<8;t++)"Wp"===e[0][t]&&e[0][t],"Bp"===e[7][t]&&e[7][t];if(r<4&&r>=s){let s=l.getLegalMoves(e,t);d.turn=t;let c=o(e);for(let e=0;e<s.length;e++){let u=o(c);d[s[e]]={board:o(l.makeMove(s[e],d.board))},a(l.makeMove(s[e],u),i(t),n(r),d[s[e]],0)}}};a(o(e),t,n(0),r.start,0),console.log(r);let d=function(e){for(item in e.score=l.scoreBoard(e.board,e.turn),e)"turn"!==item&&"score"!==item&&"board"!==item&&"meta"!==item&&"pruneDump"!==item&&d(e[item])};d(r.start);let s=function(e){let o=[];if(Object.keys(e).length<5)return e.score;let i=!0;for(item in e)"turn"!==item&&"score"!==item&&"board"!==item&&"meta"!==item&&"pruneDump"!==item&&void 0===e[item].meta&&(i=!1);for(item in!0===i&&(e=l.pruneMeta(e)),e)"turn"!==item&&"score"!==item&&"board"!==item&&"meta"!==item&&"pruneDump"!==item&&o.push(s(e[item]));return o=o.sort(function(e,t){return e-t}),o="B"===t?o.slice(-2):o.slice(0,2),e.meta=(o[0]+o[1])/o.length,e.meta};for(let e=0;e<=3;e++)s(r.start);for(item in r.start)if("turn"!==item&&"score"!==item&&"board"!==item&&"meta"!==item&&"pruneDump"!==item){a(o(r.start[item].board),i(t),n(0),r.start[item],2),console.log(r),d(r.start[item]);for(let e=0;e<=3;e++)void 0!==r.start[item]&&s(r.start[item])}return r},scoreBoard:function(e,t){let o=0;for(let t=0;t<8;t++)for(let l=0;l<8;l++){let i=0,r=1,n=e[t][l];n.includes("B")&&(r=-1),(n.includes("b")||n.includes("n"))&&(i=3),n.includes("r")&&(i=5),n.includes("p")&&(i=1),n.includes("q")&&(i=8),o+=i*r}return arr=l.getLegalMoves(e,t),l.isInCheck(e,"W")&&(o-=1,"W"===t&&0===arr.length&&(o-=100)),l.isInCheck(e,"B")&&(o+=1,"B"===t&&0===arr.length&&(o-=100)),o}};t.exports=l},{"./data":3}],2:[function(e,t,o){var l=e("./data"),i=e("./isInCheck");t.exports=function(e){console.log(l.board,"!");let t=[1,1],o=[];if("W"===e){"Wk"!==l.board[7][4]&&(t=[0,0]);for(let e=0;e<l.history.length;e+=2)l.history[e].includes("k")&&(t=[0,0]),"70"===l.history[e].slice(2,4)&&(t[0]=0),"77"===l.history[e].slice(2,4)&&(t[1]=0);for(let e=1;e<l.history.length;e+=2)(l.history[e].includes("!")||l.history[e].includes("castle"))&&(t=[0,0]);for(let e=1;e<4;e++){for(let e=0;e<8;e++){o[e]=[];for(let t=0;t<8;t++)o[e][t]=l.board[e][t]}l.board[7][e]="Wk",i("W")&&(t[0]=0);for(let e=0;e<8;e++){l.board[e]=[];for(let t=0;t<8;t++)l.board[e][t]=o[e][t]}"e"!==l.board[7][e]&&(t[0]=0)}for(let e=5;e<7;e++){for(let e=0;e<8;e++){o[e]=[];for(let t=0;t<8;t++)o[e][t]=l.board[e][t]}l.board[7][e]="Wk",i("W")&&(t[1]=0);for(let e=0;e<8;e++){l.board[e]=[];for(let t=0;t<8;t++)l.board[e][t]=o[e][t]}"e"!==l.board[7][e]&&(t[1]=0)}}else{"Bk"!==l.board[0][4]&&(t=[0,0]);for(let e=1;e<l.history.length;e+=2)(l.history[e].includes("k")||l.history[e].includes("castle"))&&(t=[0,0]),"00"===l.history[e].slice(2,4)&&(t[0]=0),"07"===l.history[e].slice(2,4)&&(t[1]=0);for(let e=0;e<l.history.length;e+=2)l.history[e].includes("!")&&(t=[0,0]);for(let e=1;e<4;e++){for(let e=0;e<8;e++){o[e]=[];for(let t=0;t<8;t++)o[e][t]=l.board[e][t]}l.board[0][e]="Bk",i("B")&&(t[0]=0);for(let e=0;e<8;e++){l.board[e]=[];for(let t=0;t<8;t++)l.board[e][t]=o[e][t]}"e"!==l.board[0][e]&&(t[0]=0)}for(let e=5;e<7;e++){for(let e=0;e<8;e++){o[e]=[];for(let t=0;t<8;t++)o[e][t]=l.board[e][t]}l.board[0][e]="Bk",i("B")&&(t[1]=0);for(let e=0;e<8;e++){l.board[e]=[];for(let t=0;t<8;t++)l.board[e][t]=o[e][t]}"e"!==l.board[0][e]&&(t[1]=0)}}return t}},{"./data":3,"./isInCheck":5}],3:[function(e,t,o){var l={board:[["Br","Bn","Bb","Bq","Bk","Bb","Bn","Br"],["Bp","Bp","Bp","Bp","Bp","Bp","Bp","Bp"],["e","e","e","e","e","e","e","e"],["e","e","e","e","e","e","e","e"],["e","e","e","e","e","e","e","e"],["e","e","e","e","e","e","e","e"],["Wp","Wp","Wp","Wp","Wp","Wp","Wp","Wp"],["Wr","Wn","Wb","Wq","Wk","Wb","Wn","Wr"]],turn:"W",opponent:"B",turnSwitch:function(){let e=l.turn;l.turn=l.opponent,l.opponent=e},history:[],legalMoves:{},move:function(e,t){let o=e.slice(0,2),l=e.slice(2,3),i=e.slice(3,4),r=e.slice(4,5),n=e.slice(5,6),a=t;return a[r][n]=o,a[l][i]="e",a},legalMovesPush:function(e){let t=!0,o=e.slice(0,2),i=e.slice(2,4);for(item in l.legalMoves)item===`${o+i}`&&(t=!1);!1===t?l.legalMoves[`${o+i}`].push(e):l.legalMoves[`${o+i}`]=[e]},getLegalMoves:function(){for(let e=0;e<8;e++)for(let t=0;t<8;t++){let o=l.board[e][t];if(l.board[e][t].includes(l.turn)){if(o.includes("k"))for(let i=-1;i<=1;i++)for(let r=-1;r<=1;r++)if(void 0!==l.board[e+i]&&void 0!==l.board[e+i][t+r]){if("e"===l.board[e+i][t+r]){let n=`${o}${e}${t}${e+i}${t+r}`;l.legalMovesPush(n)}if(l.board[e+i][t+r].includes(l.opponent)){let n=`${o}${e}${t}${e+i}${t+r}`;l.legalMovesPush(n)}}if(o.includes("p"))if(o.includes("W")&&"W"===l.turn){if("e"===l.board[e-1][t]){let i=`${o}${e}${t}${e-1}${t}`;if(l.legalMovesPush(i),void 0!==l.board[e-2]&&"e"===l.board[e-2][t]&&6===e){let i=`${o}${e}${t}${e-2}${t}`;l.legalMovesPush(i)}}if(void 0!==l.board[e-1][t-1]&&l.board[e-1][t-1].includes("B")){let i=`${o}${e}${t}${e-1}${t-1}`;l.legalMovesPush(i)}if(void 0!==l.board[e-1][t+1]&&l.board[e-1][t+1].includes("B")){let i=`${o}${e}${t}${e-1}${t+1}`;l.legalMovesPush(i)}}else if(o.includes("B")&&"B"===l.turn){if("e"===l.board[e+1][t]){let i=`${o}${e}${t}${e+1}${t}`;if(l.legalMovesPush(i),void 0!==l.board[e+2]&&"e"===l.board[e+2][t]&&1===e){let i=`${o}${e}${t}${e+2}${t}`;l.legalMovesPush(i)}}if(void 0!==l.board[e+1][t-1]&&l.board[e+1][t-1].includes("W")){let i=`${o}${e}${t}${e+1}${t-1}`;l.legalMovesPush(i)}if(void 0!==l.board[e+1][t+1]&&l.board[e+1][t+1].includes("W")){let i=`${o}${e}${t}${e+1}${t+1}`;l.legalMovesPush(i)}}if(o.includes("r")){for(let i=1;i<8;i++)if(void 0!==l.board[e+i]&&void 0!==l.board[e+i][t])if("e"===l.board[e+i][t]){let r=`${o}${e}${t}${e+i}${t}`;l.legalMovesPush(r)}else if(l.board[e+i][t].includes(l.opponent)){let r=`${o}${e}${t}${e+i}${t}`;l.legalMovesPush(r),i=8}else i=8;for(let i=1;i<8;i++)if(void 0!==l.board[e-i]&&void 0!==l.board[e-i][t])if("e"===l.board[e-i][t]){let r=`${o}${e}${t}${e-i}${t}`;l.legalMovesPush(r)}else if(l.board[e-i][t].includes(l.opponent)){let r=`${o}${e}${t}${e-i}${t}`;l.legalMovesPush(r),i=8}else i=8;for(let i=1;i<8;i++)if(void 0!==l.board[e]&&void 0!==l.board[e][t-i])if("e"===l.board[e][t-i]){let r=`${o}${e}${t}${e}${t-i}`;l.legalMovesPush(r)}else if(l.board[e][t-i].includes(l.opponent)){let r=`${o}${e}${t}${e}${t-i}`;l.legalMovesPush(r),i=8}else i=8;for(let i=1;i<8;i++)if(void 0!==l.board[e]&&void 0!==l.board[e][t+i])if("e"===l.board[e][t+i]){let r=`${o}${e}${t}${e}${t+i}`;l.legalMovesPush(r)}else if(l.board[e][t+i].includes(l.opponent)){let r=`${o}${e}${t}${e}${t+i}`;l.legalMovesPush(r),i=8}else i=8}if(o.includes("n")){let i=function(i,r){if(void 0!==l.board[e+i]&&void 0!==l.board[e+i][t+r]&&("e"===l.board[e+i][t+r]||l.board[e+i][t+r].includes(`${l.opponent}`))){let n=`${o}${e}${t}${e+i}${t+r}`;l.legalMovesPush(n)}};i(2,1),i(2,-1),i(-2,1),i(-2,-1),i(1,2),i(1,-2),i(-1,2),i(-1,-2)}if(o.includes("b")){for(let i=1;i<8;i++)if(void 0!==l.board[e+i]&&void 0!==l.board[e+i][t+i])if("e"===l.board[e+i][t+i]){let r=`${o}${e}${t}${e+i}${t+i}`;l.legalMovesPush(r)}else if(l.board[e+i][t].includes(l.opponent)){let r=`${o}${e}${t}${e+i}${t+i}`;l.legalMovesPush(r),i=8}else i=8;for(let i=1;i<8;i++)if(void 0!==l.board[e-i]&&void 0!==l.board[e-i][t+i])if("e"===l.board[e-i][t+i]){let r=`${o}${e}${t}${e-i}${t+i}`;l.legalMovesPush(r)}else if(l.board[e-i][t+i].includes(l.opponent)){let r=`${o}${e}${t}${e-i}${t+i}`;l.legalMovesPush(r),i=8}else i=8;for(let i=1;i<8;i++)if(void 0!==l.board[e+i]&&void 0!==l.board[e+i][t-i])if("e"===l.board[e+i][t-i]){let r=`${o}${e}${t}${e+i}${t-i}`;l.legalMovesPush(r)}else if(l.board[e+i][t-i].includes(l.opponent)){let r=`${o}${e}${t}${e+i}${t-i}`;l.legalMovesPush(r),i=8}else i=8;for(let i=1;i<8;i++)if(void 0!==l.board[e-i]&&void 0!==l.board[e-i][t-i])if("e"===l.board[e-i][t-i]){let r=`${o}${e}${t}${e-i}${t-i}`;l.legalMovesPush(r)}else if(l.board[e-i][t-i].includes(l.opponent)){let r=`${o}${e}${t}${e-i}${t-i}`;l.legalMovesPush(r),i=8}else i=8}if(o.includes("q")){for(let i=1;i<8;i++)if(void 0!==l.board[e+i]&&void 0!==l.board[e+i][t])if("e"===l.board[e+i][t]){let r=`${o}${e}${t}${e+i}${t}`;l.legalMovesPush(r)}else if(l.board[e+i][t].includes(l.opponent)){let r=`${o}${e}${t}${e+i}${t}`;l.legalMovesPush(r),i=8}else i=8;for(let i=1;i<8;i++)if(void 0!==l.board[e-i]&&void 0!==l.board[e-i][t])if("e"===l.board[e-i][t]){let r=`${o}${e}${t}${e-i}${t}`;l.legalMovesPush(r)}else if(l.board[e-i][t].includes(l.opponent)){let r=`${o}${e}${t}${e-i}${t}`;l.legalMovesPush(r),i=8}else i=8;for(let i=1;i<8;i++)if(void 0!==l.board[e]&&void 0!==l.board[e][t-i])if("e"===l.board[e][t-i]){let r=`${o}${e}${t}${e}${t-i}`;l.legalMovesPush(r)}else if(l.board[e][t-i].includes(l.opponent)){let r=`${o}${e}${t}${e}${t-i}`;l.legalMovesPush(r),i=8}else i=8;for(let i=1;i<8;i++)if(void 0!==l.board[e]&&void 0!==l.board[e][t+i])if("e"===l.board[e][t+i]){let r=`${o}${e}${t}${e}${t+i}`;l.legalMovesPush(r)}else if(l.board[e][t+i].includes(l.opponent)){let r=`${o}${e}${t}${e}${t+i}`;l.legalMovesPush(r),i=8}else i=8;for(let i=1;i<8;i++)if(void 0!==l.board[e+i]&&void 0!==l.board[e+i][t+i])if("e"===l.board[e+i][t+i]){let r=`${o}${e}${t}${e+i}${t+i}`;l.legalMovesPush(r)}else if(l.board[e+i][t+i].includes(l.opponent)){let r=`${o}${e}${t}${e+i}${t+i}`;l.legalMovesPush(r),i=8}else i=8;for(let i=1;i<8;i++)if(void 0!==l.board[e-i]&&void 0!==l.board[e-i][t+i])if("e"===l.board[e-i][t+i]){let r=`${o}${e}${t}${e-i}${t+i}`;l.legalMovesPush(r)}else if(l.board[e-i][t+i].includes(l.opponent)){let r=`${o}${e}${t}${e-i}${t+i}`;l.legalMovesPush(r),i=8}else i=8;for(let i=1;i<8;i++)if(void 0!==l.board[e+i]&&void 0!==l.board[e+i][t-i])if("e"===l.board[e+i][t-i]){let r=`${o}${e}${t}${e+i}${t-i}`;l.legalMovesPush(r)}else if(l.board[e+i][t-i].includes(l.opponent)){let r=`${o}${e}${t}${e+i}${t-i}`;l.legalMovesPush(r),i=8}else i=8;for(let i=1;i<8;i++)if(void 0!==l.board[e-i]&&void 0!==l.board[e-i][t-i])if("e"===l.board[e-i][t-i]){let r=`${o}${e}${t}${e-i}${t-i}`;l.legalMovesPush(r)}else if(l.board[e-i][t-i].includes(l.opponent)){let r=`${o}${e}${t}${e-i}${t-i}`;l.legalMovesPush(r),i=8}else i=8}}}console.log(l.board);let t=e("./canCastle")(l.turn);if(console.log(l.board),0!==t[0]||t[1],l.legalMoves.castle=[],"W"===l.turn){if(1===t[0]){let e="whiteCastleLeft";l.legalMoves.castle.push(e)}if(1===t[1]){let e="whiteCastleRight";l.legalMoves.castle.push(e)}}else{if(1===t[0]){let e="blackCastleLeft";l.legalMoves.castle.push(e)}if(1===t[1]){let e="blackCastleRight";l.legalMoves.castle.push(e)}}},removeChecks:function(){for(item in console.log(l.board,"!"),l.legalMoves)if("castle"!==item){let r=!1;for(let n=0;n<l.legalMoves[item].length;n++){var e=[];for(let t=0;t<8;t++){e[t]=[];for(let o=0;o<8;o++)e[t][o]=l.board[t][o]}r=!1;let a=l.move(l.legalMoves[item][n],l.board);l.board=a,l.turnSwitch();let d="",s="";for(let e=0;e<8;e++)for(let t=0;t<8;t++)l.board[e][t]===`${l.opponent}k`&&(d=e,s=t);function t(e,t){for(let o=1;o<8;o++)void 0!==l.board[d+e*o]&&void 0!==l.board[d+e*o][s+t*o]?"e"!==l.board[d+e*o][s+t*o]&&(l.board[d+e*o][s+t*o]===`${l.turn}k`&&1===o?(array.push("!"),o=8):(array.push(l.board[d+e*o][s+t*o]),o=8)):(array.push("e"),o=8);return array}"W"===l.opponent?(void 0!==l.board[d-1]&&void 0!==l.board[d-1][s+1]&&l.board[d-1][s+1]===`${l.turn}p`&&(r=!0),void 0!==l.board[d-1]&&void 0!==l.board[d-1][s-1]&&l.board[d-1][s-1]===`${l.turn}p`&&(r=!0)):(void 0!==l.board[d+1]&&void 0!==l.board[d+1][s+1]&&l.board[d+1][s+1]===`${l.turn}p`&&(r=!0),void 0!==l.board[d+1]&&void 0!==l.board[d+1][s-1]&&l.board[d+1][s-1]===`${l.turn}p`&&(r=!0)),array=[];for(let e=-1;e<=1;e++)for(let o=-1;o<=1;o++)t(e,o);(array.includes("!")||array.includes(`${l.turn}q`))&&(r=!0);for(let e=0;e<9;e+=2)array[e]===`${l.turn}b`&&(r=!0);for(let e=1;e<9;e+=2)array[e]===`${l.turn}r`&&(r=!0);var o=function(e){void 0!==l.board[d+e[0]]&&void 0!==l.board[d+e[0]][s+e[1]]&&l.board[d+e[0]][s+e[1]]===`${l.turn}n`&&(r=!0)},i=[[2,1],[2,-1],[-2,1],[-2,-1],[1,2],[1,-2],[-1,2],[-1,-2]];for(let e=0;e<i.length;e++)o(i[e]);l.board=e,l.turnSwitch(),!0===r&&(console.log("!!!removing move",l.legalMoves[item][n]),l.legalMoves[item].splice(n,1),n--)}}},executeMove:{start:function(t){console.log("move:",t);let o=e("./pawnPromotionCheck");console.log("execute move start board pos: ",l.board),o.run(),o.finish(t)},finish:function(t){let o=!1;for(item in l.legalMoves)for(let e=0;e<l.legalMoves[item].length;e++)l.legalMoves[item][e]===t&&(o=!0);if(console.log("move",t),!1===o)console.log("Invalid move");else{if(t.includes("Castle"))"whiteCastleLeft"===t?(l.board[7][0]="e",l.board[7][2]="Wk",l.board[7][3]="Wr",l.board[7][4]="e"):"whiteCastleRight"===t?(l.board[7][4]="e",l.board[7][5]="Wr",l.board[7][6]="Wk",l.board[7][7]="e"):"blackCastleLeft"===t?(l.board[0][0]="e",l.board[0][2]="Bk",l.board[0][3]="Br",l.board[0][4]="e"):"blackCastleRight"===t&&(l.board[0][4]="e",l.board[0][5]="Br",l.board[0][6]="Bk",l.board[0][7]="e");else{document.getElementById("info").innerHTML="";let e=t.slice(0,2),o=t.slice(2,3),i=t.slice(3,4),r=t.slice(4,5),n=t.slice(5,6);l.board[r][n]=e,l.board[o][i]="e"}e("./isInCheck")(l.opponent)?(l.history.push(`${t}!`),p=document.createElement("p"),"B"===l.opponent?p.textContent="Black is in check!":p.textContent="White is in check!",document.getElementById("info").appendChild(p)):l.history.push(t),l.turnSwitch(),l.legalMoves={},l.getLegalMoves(),l.removeChecks(),e("./domPrinter")(),selectedPiece="",console.log("board after move: ",l.board);let o=0;for(item in l.legalMoves)o+=l.legalMoves[item].length;if(0===o&&(l.history[l.history.length-1].includes("!")?"W"===l.opponent?document.getElementById("info").firstChild.textContent="Checkmate! White wins!":document.getElementById("info").firstChild.textContent="Checkmate! Black wins!":(p=document.createElement("p"),p.textContent="There is a draw",document.getElementById("info").appendChild(p))),null===document.getElementById("aiMove")||void 0===document.getElementById("aiMove")){let t=document.createElement("button");t.id="aiMove",t.type="button",ai=e("./ai"),t.addEventListener("click",function(){ai.execute(l.board,l.turn)}),t.textContent="Make AI move",document.getElementById("info").appendChild(t)}}}},selectedPiece:""};t.exports=l},{"./ai":1,"./canCastle":2,"./domPrinter":4,"./isInCheck":5,"./pawnPromotionCheck":8}],4:[function(e,t,o){var l=e("./data"),i=e("./selectPiece"),r=e("./makeMove");t.exports=function(){document.getElementById("board").innerHTML="",document.getElementById("board").addEventListener("click",function(e){r(e.target.className,e.target.id),r(e.target.parentElement.className,e.target.parentElement.id)});for(let e=0;e<8;e++){let t=document.createElement("div");t.style.display="flex";for(let o=0;o<8;o++){let r=document.createElement("div");if(r.id=e.toString()+o.toString(),r.style.border="2px solid black",r.style.width="75px",r.style.height="75px","e"!==l.board[e][o]){r.id=l.board[e][o]+e.toString()+o.toString(),l.board[e][o].includes(l.turn)&&r.addEventListener("click",function(){i(r.id)});let t=document.createElement("div");t.style.width="75px",t.style.height="75px","Wp"===l.board[e][o]?t.style.backgroundImage="url('./img/Wp.png')":"Wr"===l.board[e][o]?t.style.backgroundImage="url('./img/Wr.png')":"Wn"===l.board[e][o]?t.style.backgroundImage="url('./img/Wn.png')":"Wb"===l.board[e][o]?t.style.backgroundImage="url('./img/Wb.png')":"Wq"===l.board[e][o]?t.style.backgroundImage="url('./img/Wq.png')":"Wk"===l.board[e][o]?t.style.backgroundImage="url('./img/Wk.png')":"Bp"===l.board[e][o]?t.style.backgroundImage="url('./img/Bp.png')":"Br"===l.board[e][o]?t.style.backgroundImage="url('./img/Br.png')":"Bn"===l.board[e][o]?t.style.backgroundImage="url('./img/Bn.png')":"Bb"===l.board[e][o]?t.style.backgroundImage="url('./img/Bb.png')":"Bq"===l.board[e][o]?t.style.backgroundImage="url('./img/Bq.png')":"Bk"===l.board[e][o]&&(t.style.backgroundImage="url('./img/Bk.png')"),r.appendChild(t)}t.appendChild(r)}document.getElementById("board").appendChild(t)}}},{"./data":3,"./makeMove":7,"./selectPiece":10}],5:[function(e,t,o){var l=e("./data");t.exports=function(e){let t="W";"W"===e&&(t="B"),check=!1;let o="",i="";for(let t=0;t<8;t++)for(let r=0;r<8;r++)l.board[t][r]===`${e}k`&&(o=t,i=r);function r(e,r){for(let n=1;n<8;n++)void 0!==l.board[o+e*n]&&void 0!==l.board[o+e*n][i+r*n]?"e"!==l.board[o+e*n][i+r*n]&&(l.board[o+e*n][i+r*n]===`${t}k`&&1===n?(array.push("!"),n=8):(array.push(l.board[o+e*n][i+r*n]),n=8)):(array.push("e"),n=8);return array}"W"===e?(void 0!==l.board[o-1]&&void 0!==l.board[o-1][i+1]&&l.board[o-1][i+1]===`${t}p`&&(check=!0),void 0!==l.board[o-1]&&void 0!==l.board[o-1][i-1]&&l.board[o-1][i-1]===`${t}p`&&(check=!0)):(void 0!==l.board[o+1]&&void 0!==l.board[o+1][i+1]&&l.board[o+1][i+1]===`${t}p`&&(check=!0),void 0!==l.board[o+1]&&void 0!==l.board[o+1][i-1]&&l.board[o+1][i-1]===`${t}p`&&(check=!0)),array=[];for(let e=-1;e<=1;e++)for(let t=-1;t<=1;t++)r(e,t);console.log("king line array:",array),(array.includes("!")||array.includes(`${t}q`))&&(check=!0);for(let e=0;e<9;e+=2)array[e]===`${t}b`&&(check=!0);for(let e=1;e<9;e+=2)array[e]===`${t}r`&&(check=!0);var n=function(e){for(item in e)void 0!==l.board[o+e[0]]&&void 0!==l.board[o+e[0]][i+e[1]]&&l.board[o+e[0]][i+e[1]]===`${t}n`&&(check=!0)},a=[[2,1],[2,-1],[-2,1],[-2,-1],[1,2],[1,-2],[-1,2],[-1,-2]];for(let e=0;e<a.length;e++)n(a[e]);return check}},{"./data":3}],6:[function(e,t,o){var l=e("./data"),i=e("./domPrinter"),r=e("./ai");l.getLegalMoves(),l.removeChecks(),i(),console.log("Board:",l.board),console.log("Legal moves:",l.legalMoves),document.getElementById("display").addEventListener("click",function(){console.log(l.board),console.log(l.legalMoves),console.log(l.history)});let n=document.createElement("button");n.id="aiMove",n.type="button",n.addEventListener("click",function(){r.execute(l.board,l.turn)}),n.textContent="Make AI move",document.getElementById("info").appendChild(n)},{"./ai":1,"./data":3,"./domPrinter":4}],7:[function(e,t,o){var l=e("./data");t.exports=function(e,t){if("active"===e)if(l.selectedPiece.includes("k")&&"76"===t)l.executeMove.start("whiteCastleRight");else if(l.selectedPiece.includes("k")&&"72"===t)l.executeMove.start("whiteCastleLeft");else if(l.selectedPiece.includes("k")&&"02"===t)l.executeMove.start("blackCastleLeft");else if(l.selectedPiece.includes("k")&&"06"===t)l.executeMove.start("blackCastleRight");else{let e=t;t.length>2&&(e=t.slice(2,4)),l.executeMove.start(l.selectedPiece+e)}}},{"./data":3}],8:[function(e,t,o){let l=e("./data"),i=e("./promotePawn"),r={run:function(){if("B"===l.turn)for(let e=0;e<8;e++)"Wp"===l.board[0][e]&&(r.complete=!1,i([0,e]));else for(let e=0;e<8;e++)"Bp"===l.board[7][e]&&(r.complete=!1,i([7,e]))},finish:function(e){if("B"===l.turn){for(let e=0;e<8;e++)if("Wp"===l.board[0][e])return!1}else for(let e=0;e<8;e++)if("Bp"===l.board[7][e])return!1;l.executeMove.finish(e)}};t.exports=r},{"./data":3,"./promotePawn":9}],9:[function(e,t,o){let l=e("./data");e("./domPrinter");t.exports=function(t){if(console.log(document.getElementById("info").firstChild),null===document.getElementById("info").firstChild){let o=function(o){if(document.getElementById("info"),o.target.id.includes("q")||o.target.id.includes("r")||o.target.id.includes("k")||o.target.id.includes("b")){document.getElementById("info").innerHTML=" ",l.board[t[0]][t[1]]=`${l.opponent}${o.target.id}`,e("./isInCheck")(l.turn)&&(p=document.createElement("p"),"B"===l.opponent?(p.textContent="Black is in check!",l.history[l.history.length-1]+="!"):(p.textContent="White is in check!",l.history[l.history.length-1]+="!"),document.getElementById("info").appendChild(p)),l.legalMoves={},l.getLegalMoves(),l.removeChecks(),e("./domPrinter")(),selectedPiece="";let i=0;for(item in l.legalMoves)i+=l.legalMoves[item].length;0===i&&(l.history[l.history.length-1].includes("!")?"B"===l.opponent?document.getElementById("info").firstChild.textContent="Checkmate! White wins!":document.getElementById("info").firstChild.textContent="Checkmate! Black wins!":(p=document.createElement("p"),p.textContent="There is a draw",document.getElementById("info").appendChild(p)))}},i=function(e){let t=document.createElement("div");return t.style.width="75px",t.style.height="75px",t.id=e,t.addEventListener("click",o),t},r=i("n"),n=i("b"),a=i("r"),d=i("q");document.getElementById("info").appendChild(r),document.getElementById("info").appendChild(n),document.getElementById("info").appendChild(a),document.getElementById("info").appendChild(d),"W"===l.opponent?(document.getElementById("n").style.backgroundImage="url('./img/Wn.png')",document.getElementById("b").style.backgroundImage="url('./img/Wb.png')",document.getElementById("r").style.backgroundImage="url('./img/Wr.png')",document.getElementById("q").style.backgroundImage="url('./img/Wq.png')"):(document.getElementById("n").style.backgroundImage="url('./img/Bn.png')",document.getElementById("b").style.backgroundImage="url('./img/Bb.png')",document.getElementById("r").style.backgroundImage="url('./img/Br.png')",document.getElementById("q").style.backgroundImage="url('./img/Bq.png')")}}},{"./data":3,"./domPrinter":4,"./isInCheck":5}],10:[function(e,t,o){var l=e("./data");t.exports=function(e){let t=document.querySelectorAll(".active");for(let e=0;e<t.length;e++)t[e].classList=" ";if(void 0!==l.legalMoves[e]){l.selectedPiece=e;for(let t=0;t<l.legalMoves[e].length;t++){let o=l.legalMoves[e][t].slice(4,5),i=l.legalMoves[e][t].slice(5,6),r="";"e"!==l.board[o][i]&&(r=l.board[o][i]),document.getElementById(r+o+i).className="active"}}if(e.includes("k")&&void 0!==l.legalMoves.castle){console.log("pullingCastleMoves");for(let e=0;e<l.legalMoves.castle.length;e++)"whiteCastleLeft"===l.legalMoves.castle[e]&&(document.getElementById("72").className="active"),"whiteCastleRight"===l.legalMoves.castle[e]&&(document.getElementById("76").className="active"),"blackCastleLeft"===l.legalMoves.castle[e]&&(document.getElementById("02").className="active"),"blackCastleRight"===l.legalMoves.castle[e]&&(document.getElementById("06").className="active")}}},{"./data":3}]},{},[1,2,3,4,5,6,7,8,9,10]);